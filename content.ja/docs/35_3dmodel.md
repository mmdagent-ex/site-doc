---
title: 3Dモデルを表示する
slug: 3d-model
---
# 3Dモデルを表示する

MikuMikuDance の3-Dモデル形式である .pmd フォーマットを採用しており、人型モデルを含む任意の .pmd ファイルを表示できます。また、PMX モデルも変換によって表示することができます。

## PMDモデル

以下のように **MODEL_ADD** メッセージを使ってモデルをロードして表示します。以下の例の `agent1` の部分は、あとでこの読み込まれたモデルを参照するためのエイリアス名（モデルエイリアス）宣言です。既にロード済みのモデルと重ならない名前を指定します。

{{<message>}}
   <eps> MODEL_ADD|agent1|some/where/model.pmd
{{</message>}}

## PMXモデル

PMX モデルはそのままでは表示できませんが、PMXEditor を使って PMD ファイルと CSV ファイルに変換することで表示させることができます。手順は以下の通りです。PMXEditor 0.2.5.7 で動作確認をしています。

- PMXEditor をインストールする
- PMX ファイルを PMXEditor で開く。
- メニューの「ファイル - エクスポート」から拡張子を `.pmd` にして保存。
- メニューの「ファイル - テキスト(CSV)変換 - CSVファイルへ出力」から拡張子を `.pmd.csv` にして保存。

変換した .pmd と .csv は、元の pmx と同じ場所に置きます。ファイル名は以下のようにつける必要があります。特に .csv の名前に注意してください。

```text
  モデル.pmx
  モデル.pmd
  モデル.pmd.csv
```

利用時はMMDAgent-EXに “モデル.pmd” を指定します。

## 互換性

MMDAgent-EX におけるPMDとPMXの仕様対応表です。なお MME 等の外部エフェクトには対応していません。

|項目|PMD|PMX|
|----|---|---|
|物理演算|○|○|
|IKのON/OFF|○|○|
|非表示モーフ|○|○|
|材質情報|○|○|
|エッジ倍率|-|○|
|BDEF4|-|○|
|SDEF|-|△(暫定)|
|変化階層|-|○|
|物理後変形|-|○|
|ボーン更新順|-|○|
|頂点モーフ|-|○|
|ボーンモーフ|-|○|
|UVモーフ|-|○|
|材質モーフ|-|○(TeX係数のみ×)|
|グループモーフ|-|○|
|追加UV|-|×|
|外部親変形|-|×|

## 利用にあたって

本ソフトウェアの ELSI ガイドラインを遵守し、各種利用規約およびコミュニティにおける利用の慣習に従い、適切に利用してください。

※ 本システムでは、PMXモデルの利用時中は右上に「PMX」の文字が常に表示されます。

## 関連パラメータ

モデル表示に関連する主な .mdf の設定項目を列挙します。モデルの表示をカスタマイズしたい場合に参考にしてください。

### コメント表示

ロード時にモデルの内部コメントを表示するときの持続時間（秒）。0で表示しない。

{{< mdf>}}
display_comment_time=0
{{< /mdf>}}

### モデル数

シーン内に表示できるモデル数の最大値。最小は1、最大は1024。デフォルトは10。

{{< mdf>}}
max_num_model=10
{{< /mdf>}}

### MSAA強度

アンチエイリアス (MSAA) の強度。大きいほど線が滑らかに表示される。0でOFFにする。デフォルトは 4。

{{< mdf>}}
max_multi_sampling=4
{{< /mdf>}}

### トゥーンエッジの太さ

（`K`, `Shift+K` でも変更可能）

![bold edge](/images/edge1.png)
![thin edge](/images/edge2.png)

{{< mdf>}}
cartoon_edge_width=0.35
{{< /mdf>}}

### 並列スキニングスレッド数

モデルの表示計算（スキニング）に使用するCPUスレッド数。
巨大モデル（頂点 > 20万程度）でフレーム落ちするとき `2` や `4` を設定するとよい。デフォルトは1。

{{< mdf>}}
parallel_skinning_numthreads=1
{{< /mdf>}}


