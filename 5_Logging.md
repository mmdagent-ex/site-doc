# ログ機能

MMDAgent-EX には制御情報や動きを記録する機能がいくつか備わっています。

## モデルの身体動作の保存

CGアバターの動作をモーションファイル(.vmd)として保存することができます。

`MOTIONCAPTURE_START|model alias|filename.vmd` を実行することで、その時点からのモデルの動きを全て `filename.vmd` に記録していきます。
`MOTIONCAPTURE_STOP|model alias` で記録をストップします。

## リモートから送信されたメッセージの保存

外部プロセスから受け取った制御メッセージをファイルダンプすることが可能です。

メッセージ `AVATAR_LOGSAVE_START|filename` を実行することで、その時点から受信した制御メッセージを全て `filename` へダンプしていきます。`AVATAR_LOGSAVE_STOP` メッセージで記録を停止します。なお音声データチャンク (`SNDxxx`)はこの機能では保存されません。音声を保存するには下記の機能を使ってください。

## リモートから送信された音声の保存

.mdf ファイルで `Plugin_Remote_Record_Wave_Dir=directory`の形で保存先のフォルダ名を指定します。これで、再生した音声データを wav ファイルで逐次保存されます。

## MMDAgent のログの保存

MMDAgent の動作ログを保存する方法は2種類あります。

### 起動から終了まですべてのログを1つのファイルに保存する

.mdf に `log_file=ファイル名` を指定すると、起動後から終了までのログを、指定したファイルに保存できます。

指定ファイルが既にある場合は上書き保存してしまうので注意してください。

### メッセージで開始・終了を制御してタイムスタンプ付きファイルで保存する

`LOG_START` メッセージでログの記録を開始、`LOG_FINISH` メッセージでログの記録を終了できます。この `LOG_START` から `LOG_FINISH` までの間に MMDAgent で流れたログが、`LOG_FINISH` の直後にタイムスタンプ付きファイルとしてローカルフォルダーに保存されます。繰り返し使うことで複数の利用履歴が保存できます。

保存先はコンテンツのあるフォルダの `log` フォルダ以下です。コンテンツの `PACKAGE_DESC.txt` で `logIdentifier` が指定されていた場合、その名前付きで保存されます。
